name: 'Weather Notification Action'
description: 'ğŸŒ¤ï¸ åŠŸèƒ½å¼ºå¤§çš„å¤©æ°”é€šçŸ¥Actionï¼Œæ”¯æŒé«˜å¾·åœ°å›¾å’ŒOpenWeatherMapåŒæ•°æ®æº'
author: 'Weather Notification Team'

branding:
  icon: 'cloud'
  color: 'blue'

inputs:
  # å¤©æ°”APIé…ç½®
  weather_provider:
    description: 'å¤©æ°”æ•°æ®æä¾›å•† (amap æˆ– openweather)'
    required: false
    default: 'amap'
  
  amap_api_key:
    description: 'é«˜å¾·åœ°å›¾APIå¯†é’¥'
    required: false
    
  openweather_api_key:
    description: 'OpenWeatherMap APIå¯†é’¥'
    required: false
    
  # åŸå¸‚é…ç½®
  city:
    description: 'åŸå¸‚åç§°æˆ–6ä½åŸå¸‚ç¼–ç '
    required: false
    default: 'Beijing'
    
  # é‚®ä»¶æœåŠ¡å™¨é…ç½®
  smtp_host:
    description: 'SMTPæœåŠ¡å™¨åœ°å€'
    required: true
    default: 'smtp.gmail.com'
    
  smtp_port:
    description: 'SMTPç«¯å£'
    required: false
    default: '587'
    
  smtp_user:
    description: 'å‘é€é‚®ç®±åœ°å€'
    required: true
    
  smtp_pass:
    description: 'é‚®ç®±å¯†ç æˆ–åº”ç”¨ä¸“ç”¨å¯†ç '
    required: true
    
  # æ”¶ä»¶äººé…ç½®
  recipient_emails:
    description: 'æ”¶ä»¶äººé‚®ç®±åœ°å€ï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰'
    required: true
    
  # é‚®ä»¶é…ç½®
  email_subject:
    description: 'é‚®ä»¶ä¸»é¢˜ï¼ˆå¯é€‰ï¼Œé»˜è®¤è‡ªåŠ¨ç”Ÿæˆï¼‰'
    required: false
    
  sender_name:
    description: 'å‘é€è€…åç§°'
    required: false
    default: 'å¤©æ°”é€šçŸ¥åŠ©æ‰‹'

outputs:
  status:
    description: 'æ‰§è¡ŒçŠ¶æ€ (success/failure)'
  message:
    description: 'æ‰§è¡Œç»“æœæ¶ˆæ¯'
  weather_data:
    description: 'å¤©æ°”æ•°æ®JSONå­—ç¬¦ä¸²'
  recipients_count:
    description: 'é‚®ä»¶å‘é€çš„æ”¶ä»¶äººæ•°é‡'

runs:
  using: 'node20'
  main: 'dist/index.js' 